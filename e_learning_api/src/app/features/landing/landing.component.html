<!-- Loading Overlay -->
<div *ngIf="coursesLoading || categoriesLoading || featuredCoursesLoading"
    class="fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50">
    <div class="text-center">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto mb-4"></div>
        <p class="text-gray-600">Loading courses...</p>
    </div>
</div>

<!-- Error Banner -->
<div *ngIf="coursesError || categoriesError || featuredCoursesError"
    class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
    <div class="flex items-center justify-between">
        <span>{{ coursesError || categoriesError || featuredCoursesError }}</span>
        <button (click)="retryFetch()" class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600">
            Retry
        </button>
    </div>
</div>

<!-- Header -->
<header class="bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
            <div class="flex items-center space-x-8">
                <div class="text-2xl font-bold text-gray-900">ElimuHub</div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#" class="text-gray-600 hover:text-gray-900">Home</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900">About</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900">Courses</a>
                    <a href="#" class="text-gray-600 hover:text-gray-900">Contact</a>
                </nav>
            </div>
            <div class="flex items-center space-x-4 cursor-pointer">
                <span  routerLink="/register" class="text-gray-600">Sign up</span>
                <button routerLink="/login" class="bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 transition duration-300">
                    Login
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Hero Section -->
<section class="bg-gradient-to-br from-gray-100 to-gray-200 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <div>
                <h1 class="text-5xl font-bold text-gray-900 mb-6">
                    Good e-learning<br>
                    is good teaching.
                </h1>
                <p class="text-xl text-gray-600 mb-8">
                    Transform your skills with our comprehensive online courses designed by industry experts.
                </p>
                <button
                    class="bg-teal-600 text-white px-8 py-3 rounded-md text-lg font-semibold hover:bg-teal-700 transition duration-300">
                    Explore Courses
                </button>
            </div>
            <div class="relative">
                <div
                    class="bg-white rounded-lg shadow-lg p-8 transform rotate-3 hover:rotate-0 transition duration-300">
                    <div class="flex items-center justify-center h-64">
                        <div class="text-center">
                            <div
                                class="w-16 h-16 bg-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-900 mb-2">Interactive Learning</h3>
                            <p class="text-gray-600">Engage with our dynamic content and hands-on projects</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            <div class="text-center">
                <div class="text-4xl font-bold text-gray-900 mb-2">{{ courses.length || 0 }}</div>
                <div class="text-gray-600">Available Courses</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold text-gray-900 mb-2">{{ categories.length || 0 }}</div>
                <div class="text-gray-600">Categories</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold text-gray-900 mb-2">15+</div>
                <div class="text-gray-600">Years of Experience</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold text-gray-900 mb-2">2400+</div>
                <div class="text-gray-600">Students Enrolled</div>
            </div>
        </div>
    </div>
</section>

<!-- Top Categories -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900">Top Categories</h2>
            <a href="#" class="text-teal-600 hover:text-teal-700 font-semibold">See All</a>
        </div>

        <div *ngIf="categoriesLoading" class="text-center py-12">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto mb-4"></div>
            <p class="text-gray-600">Loading categories...</p>
        </div>

        <div *ngIf="!categoriesLoading && categories.length > 0"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div *ngFor="let category of categories.slice(0, 4)"
                class="bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition duration-300 cursor-pointer"
                (click)="onCategoryClick(category)">
                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
                    <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                        <path
                            d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ category.name }}</h3>
                <p class="text-gray-600 text-sm">{{ category.courseCount }} Courses</p>
            </div>
        </div>

        <div *ngIf="!categoriesLoading && categories.length === 0" class="text-center py-12">
            <p class="text-gray-600">No categories available at the moment.</p>
        </div>
    </div>
</section>

<!-- Featured Courses -->
<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center mb-12">
            <div>
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Featured Courses</h2>
                <p class="text-gray-600">Discover our most popular courses designed to help you master new skills.</p>
            </div>
            <a href="#" class="text-teal-600 hover:text-teal-700 font-semibold">View All</a>
        </div>

        <div *ngIf="featuredCoursesLoading" class="text-center py-12">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto mb-4"></div>
            <p class="text-gray-600">Loading featured courses...</p>
        </div>

        <div *ngIf="!featuredCoursesLoading && featuredCourses.length > 0"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div *ngFor="let course of featuredCourses.slice(0, 6)"
                class="bg-white rounded-lg shadow-sm hover:shadow-md transition duration-300 overflow-hidden cursor-pointer"
                (click)="onCourseClick(course)">
                <div class="h-48 bg-gradient-to-br from-yellow-200 to-orange-200 relative">
                    <img *ngIf="course.image" [src]="getCourseImage(course)" [alt]="course.title"
                        class="w-full h-full object-cover">
                    <div *ngIf="isNewCourse(course)"
                        class="absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs">
                        New
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-500">{{ course.category }}</span>
                        <span class="text-sm {{ getDifficultyColorClass(course.difficulty) }}">
                            {{ course.difficulty }}
                        </span>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ course.title }}</h3>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-3">{{ course.description }}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">By {{ getInstructorName(course) }}</span>
                        <button class="text-teal-600 hover:text-teal-700 text-sm font-semibold">
                            Enroll Now
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="!featuredCoursesLoading && featuredCourses.length === 0" class="text-center py-12">
            <p class="text-gray-600">No featured courses available at the moment.</p>
        </div>
    </div>
</section>

<!-- All Courses -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center mb-12">
            <div>
                <h2 class="text-3xl font-bold text-gray-900 mb-4">All Courses</h2>
                <p class="text-gray-600">Browse our complete catalog of courses.</p>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Search -->
                <div class="relative">
                    <input type="text" placeholder="Search courses..." #searchInput
                        (keyup.enter)="searchCourses(searchInput.value)"
                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                    <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>

                <!-- Filter by difficulty -->
            <select
  (change)="getCoursesByDifficulty($event)"
  class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-teal-500">
  <option value="">All Levels</option>
  <option value="Beginner">Beginner</option>
  <option value="Intermediate">Intermediate</option>
  <option value="Advanced">Advanced</option>
</select>
            </div>
        </div>

        <div *ngIf="coursesLoading" class="text-center py-12">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto mb-4"></div>
            <p class="text-gray-600">Loading courses...</p>
        </div>

        <div *ngIf="!coursesLoading && courses.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div *ngFor="let course of courses"
                class="bg-white rounded-lg shadow-sm hover:shadow-md transition duration-300 overflow-hidden cursor-pointer"
                (click)="onCourseClick(course)">
                <div class="h-48 bg-gradient-to-br from-blue-200 to-indigo-200 relative">
                    <img *ngIf="course.image" [src]="getCourseImage(course)" [alt]="course.title"
                        class="w-full h-full object-cover">
                    <div *ngIf="isNewCourse(course)"
                        class="absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs">
                        New
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-gray-500">{{ course.category }}</span>
                        <span class="text-sm {{ getDifficultyColorClass(course.difficulty) }}">
                            {{ course.difficulty }}
                        </span>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ course.title }}</h3>
                    <p class="text-gray-600 text-sm mb-4 line-clamp-3">{{ course.description }}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">By {{ getInstructorName(course) }}</span>
                        <button class="text-teal-600 hover:text-teal-700 text-sm font-semibold">
                            Enroll Now
                        </button>
                    </div>
                    <div class="mt-2 text-xs text-gray-400">
                        Created: {{ formatDate(course.createdAt) }}
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="!coursesLoading && courses.length === 0" class="text-center py-12">
            <p class="text-gray-600">No courses found. Try adjusting your search or filters.</p>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-[#2AAA94] text-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <div class="flex items-center mb-4">
                    <div class="w-8 h-8 bg-white rounded flex items-center justify-center">
                        <span class="text-teal-custom font-bold">S</span>
                    </div>
                    <span class="ml-2 text-xl font-bold">ElimuHub</span>
                </div>
                <p class="text-teal-100 text-sm">
                    Empowering learners worldwide with quality education and innovative learning experiences.
                </p>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                <ul class="space-y-2 text-teal-100">
                    <li><a href="#" class="hover:text-white transition duration-300">About</a></li>
                    <li><a href="#" class="hover:text-white transition duration-300">Blog</a></li>
                    <li><a href="#" class="hover:text-white transition duration-300">Courses</a></li>
                    <li><a href="#" class="hover:text-white transition duration-300">Contact</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Contact us</h3>
                <div class="space-y-2 text-teal-100">
                    <p>📞 +254 7000000</p>
                   <p>📧 admin&#64;ElimuHub.com</p>
                    <p>📍 Nairobi, Kenya</p>
                </div>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Follow Us</h3>
                <div class="flex space-x-4">
                    <a href="#"
                        class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition duration-300">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
                        </svg>
                    </a>
                    <a href="#"
                        class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition duration-300">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="border-t border-teal-400 mt-8 pt-8 text-center text-teal-100">
            <p>© 2025 ElimuHub. All rights reserved.</p>
        </div>
    </div>
</footer>
